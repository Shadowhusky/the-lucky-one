(this.webpackJsonpthe_lucky_one=this.webpackJsonpthe_lucky_one||[]).push([[0],{79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(24),s=n.n(i),o=(n(79),n(80),n(59)),r=n(15),l=n(22),d=(n(81),"the-lucky-one-"),u=n(74),j=(n(82),n(4)),b=n.n(j),f=n(5);var O,p,h=function(e){var t=e.className,n=e.text,c=Object(u.a)(e,["className","text"]);return Object(f.jsx)("div",Object(r.a)(Object(r.a)({className:b()(t,"btf-box-container")},c),{},{children:n}))},v=n(107),m=n(108),_=n(71),x=n(104),g=n(106),w=n(72),y=n(105),C=(n(84),n(63)),S=n(64),k=n.n(S),N=n.p+"static/media/flip.6200d697.wav",z=[],F=48,M=10,R=.08,A=35,I=1.5,q=.007,E=[],V=[],B=25,J=F,L=9,P={},T={iniSpeed:F,resistance:R,loop_before_slow_down:A,low_resistance_speed:I,low_resistance:q,draw_list:z},D=function(){J=F,B=25};var U=function(){var e=Object(C.a)(N,{interrupt:!0}),t=Object(l.a)(e,1)[0],n=Object(c.useState)(!1),a=Object(l.a)(n,2),i=a[0],s=a[1],u=Object(c.useState)([]),j=Object(l.a)(u,2),S=j[0],U=j[1],W=Object(c.useState)(E),X=Object(l.a)(W,2),G=X[0],H=X[1],K=Object(c.useState)(!1),Q=Object(l.a)(K,2),Y=Q[0],Z=Q[1],$=Object(c.useState)(!1),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],ce=Object(c.useState)(),ae=Object(l.a)(ce,2),ie=ae[0],se=ae[1],oe=Object(c.useState)(!1),re=Object(l.a)(oe,2),le=re[0],de=re[1],ue=Object(c.useState)(!1),je=Object(l.a)(ue,2),be=je[0],fe=je[1],Oe=Object(c.useState)({callback:void 0}),pe=Object(l.a)(Oe,2),he=pe[0],ve=pe[1],me=Object(c.useRef)(null),_e=function(){F=T.iniSpeed,R=T.resistance,A=T.loop_before_slow_down,I=T.low_resistance_speed,q=T.low_resistance;var e=Object(r.a)(Object(r.a)({},T),{},{draw_list:z||[]});return se(e),e};Object(c.useEffect)((function(){"function"===typeof t&&ve({callback:k()(t,60)})}),[t]),Object(c.useEffect)((function(){try{var e=localStorage.getItem("the_lucky_one_configs");if(!e)return void _e();var t=e=JSON.parse(e),n=t.iniSpeed;F=void 0===n?F:n;var c=t.resistance;R=void 0===c?R:c;var a=t.loop_before_slow_down;A=void 0===a?A:a;var i=t.low_resistance_speed;I=void 0===i?I:i;var s=t.low_resistance;q=void 0===s?q:s;var o=t.draw_list;z=void 0===o?z:o,se(e),V=xe(M)}catch(r){console.log("Read save user configs error: ",r)}}),[]),Object(c.useLayoutEffect)((function(){return V=xe(M),function(){clearInterval(undefined)}}),[]);var xe=function(e){var t=z.length;return Array(e).fill(0).map((function(){var e=Math.floor(Math.random()*t);return z[e]}))},ge=function(e){console.log(ie),localStorage.setItem("the_lucky_one_configs",JSON.stringify(e||ie)),Se(),_.b.success("Saved"),V=xe(M)},we=Object(c.useMemo)((function(){return V.map((function(e,t){var n=S[t]&&!S[t-1];return n&&(t-L!==1&&t-L!==-9||"function"===typeof(null===he||void 0===he?void 0:he.callback)&&he.callback(),L=t),Object(f.jsx)(h,{id:"".concat(d,"box-").concat(t),style:{transform:"translateX(".concat(G[t]||0,"px) ").concat(n?be?"scale(1.5)":"scale(1.1)":"")},className:b()("".concat(d,"box"),n&&"".concat(d,"box-selected"),n&&be&&"".concat(d,"box-winnner")),text:e},"".concat(d,"box-").concat(t))}))}),[V,G,be,he]),ye=Object(c.useMemo)((function(){if(ie)return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{children:["iniSpeed:",Object(f.jsx)(x.a,{size:"small",defaultValue:ie.iniSpeed,onChange:function(e){se(Object(r.a)(Object(r.a)({},ie),{},{iniSpeed:e})),F=e}})]}),Object(f.jsxs)("div",{children:["resistance:",Object(f.jsx)(x.a,{size:"small",step:"0.01",defaultValue:ie.resistance,onChange:function(e){se(Object(r.a)(Object(r.a)({},ie),{},{resistance:e})),R=e}})]}),Object(f.jsxs)("div",{children:["loop_before_slow_down:",Object(f.jsx)(x.a,{size:"small",defaultValue:ie.loop_before_slow_down,onChange:function(e){se(Object(r.a)(Object(r.a)({},ie),{},{loop_before_slow_down:e})),A=e}})]}),Object(f.jsxs)("div",{children:["low_resistance_speed:",Object(f.jsx)(x.a,{size:"small",defaultValue:ie.low_resistance_speed,onChange:function(e){se(Object(r.a)(Object(r.a)({},ie),{},{low_resistance_speed:e})),I=e}})]}),Object(f.jsxs)("div",{children:["low_resistance:",Object(f.jsx)(x.a,{size:"small",defaultValue:ie.low_resistance,onChange:function(e){se(Object(r.a)(Object(r.a)({},ie),{},{low_resistance:e})),q=e}})]}),Object(f.jsxs)("div",{children:["Debug mode:",Object(f.jsx)(g.a,{onChange:function(e){return ne(e)}})]})]})}),[ie]),Ce=Object(c.useMemo)((function(){if(ie)return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(x.a,{size:"small",placeholder:0,onChange:function(e){P.start_number=e}}),"-"," ",Object(f.jsx)(x.a,{size:"small",placeholder:0,onChange:function(e){P.end_number=e}})]}),Object(f.jsx)(w.a,{type:"primary",onClick:function(){for(var e=null!==(t=P.start_number)&&void 0!==t?t:0;null!==(n=e<=P.end_number)&&void 0!==n&&n;e++){var t,n;z.push(e)}se(Object(r.a)(Object(r.a)({},ie),{},{draw_list:z}))},children:"Add"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)(y.a,{size:"small",placeholder:"Enter an item",onChange:function(e){var t=e.target.value;t&&(P.draw_list=t)}}),Object(f.jsx)(w.a,{type:"primary",onClick:function(){z.push(P.draw_list),se(Object(r.a)(Object(r.a)({},ie),{},{draw_list:z}))},children:"Add"})]}),Object(f.jsx)("ul",{children:z.map((function(e,t){return Object(f.jsxs)("span",{children:[e,Object(f.jsx)(w.a,{type:"link",onClick:function(){z=[].concat(Object(o.a)(z.slice(0,t)),Object(o.a)(z.slice(t+1))),se(Object(r.a)(Object(r.a)({},ie),{},{draw_list:z}))},children:"Remove"})]},"draw-list-item".concat(t))}))})]})}),[ie]),Se=function(){Z(!1),de(!1)};return Object(f.jsxs)("div",{className:"".concat(d,"container"),children:[Object(f.jsxs)("div",{className:te?"".concat(d,"debug-panel"):void 0,children:[Object(f.jsxs)("span",{children:["loop_count: ",B]}),Object(f.jsxs)("span",{children:["speed: ",J]}),Object(f.jsxs)("span",{children:["iniSpeed: ",F]}),Object(f.jsxs)("span",{children:["resistance: ",R]}),Object(f.jsxs)("span",{children:["loop_before_slow_down: ",A]}),Object(f.jsxs)("span",{children:["low_resistance_speed: ",I]}),Object(f.jsxs)("span",{children:["low_resistance: ",q]})]}),Object(f.jsx)(v.a,{className:"".concat(d,"setting-icon"),onClick:function(){return Z(!0)}}),Object(f.jsxs)("div",{className:b()("".concat(d,"setting-panel"),!Y&&"".concat(d,"setting-panel-hide"),le&&"".concat(d,"items-panel")),children:[Y&&(le?Ce:ye),Object(f.jsx)(w.a,{type:"primary",shape:"round",size:"middle",onClick:function(){return de(!le)},children:le?"Config properties":"Config Items"}),Object(f.jsx)(w.a,{type:"primary",shape:"round",size:"middle",onClick:function(){var e=_e();ge(e),_.b.info("Configs have been reset to default"),Z(!1)},children:"Reset User Configs"}),Object(f.jsx)(w.a,{type:"primary",shape:"round",size:"middle",onClick:Y?function(){return ge()}:void 0,children:"Save"}),Object(f.jsx)(w.a,{type:"secondary",shape:"round",size:"middle",onClick:Se,children:"close"})]}),Object(f.jsxs)("div",{className:b()("".concat(d,"drawer-wrapper"),!i&&"".concat(d,"start-button")),onClick:function(){if(!i){var e,t;if(!(null===(e=V)||void 0===e||null===(t=e.filter((function(e){return e})))||void 0===t?void 0:t.length))return _.b.info("Please add some items first"),void _.b.info("Click on the config icon on the top right to add items");D(),s(!0),setTimeout((function(){var e=A+Math.floor(100*Math.random());p=V.map((function(e,t){var n;return null===(n=document.querySelector("#".concat(d,"box-").concat(t)))||void 0===n?void 0:n.offsetLeft})),O=document.querySelector("#".concat(d,"box-0")).clientWidth;requestAnimationFrame((function t(){U(V.map((function(e,t){return function(e,t){var n=null===e||void 0===e?void 0:e.getBoundingClientRect(),c=null===t||void 0===t?void 0:t.getBoundingClientRect();if(n&&c)return n.left<c.left&&n.right>c.right}(document.querySelector("#".concat(d,"box-").concat(t)),me.current)})));var n=V.map((function(e,t){var n,c=p[t]+O+(E[t]||0);return c>0?(null!==(n=E[t])&&void 0!==n?n:0)-J:p[9]-p[t]+c-J}));if(E=n,H(n),++B>=e&&(J-=J<I?q:R),J<=0)return J=0,void fe(!0);requestAnimationFrame(t)}))}),500)}},style:{opacity:Y?"0":"1"},children:[Object(f.jsx)("div",{ref:me,className:"".concat(d,"central-line"),style:{opacity:i&&!be?"1":"0"}}),Object(f.jsx)(m.a,{className:"".concat(d,"reset-button"),style:{opacity:be?"1":"0"},onClick:function(){s(!1),fe(!1),D()},children:"Reset"}),i?we:"Start"]}),Object(f.jsx)("span",{className:b()("".concat(d,"icon"),i&&"".concat(d,"icon-hide")),children:"\u221e"})]})};var W=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(U,{})})},X=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,109)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))};s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(W,{})}),document.getElementById("root")),X()}},[[99,1,2]]]);
//# sourceMappingURL=main.a86b2180.chunk.js.map